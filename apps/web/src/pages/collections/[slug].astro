---
import ProductCardList from "../../components/ProductCardList.astro";
import Layout from "../../layouts/Page.astro";
import { storefront } from "../../storefront";

const { slug } = Astro.params as { slug: string };

const collection = await storefront.collections.getOne({ slug });

if (!collection) {
  throw new Error();
}
---

<Layout>
  <ProductCardList
    name={collection.collection.name}
    products={collection.products}
  />
</Layout>
